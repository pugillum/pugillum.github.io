<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Move Azure DevOps project wiki to a standard repo | Travis Dent</title>
<meta name=keywords content="how-to">
<meta name=description content="How to shift an Azure DevOps project wiki to a standard repo">
<meta name=author content>
<link rel=canonical href=https://pugillum.github.io/posts/2021_08_03_how_to_move_azure_devops_wiki/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.79b192cca391a0913ddae67d992782c0fdb84632da097ee44bd026ffe4e6997e.css integrity="sha256-ebGSzKORoJE92uZ9mSeCwP24RjLaCX7kS9Am/+TmmX4=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://pugillum.github.io/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://pugillum.github.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://pugillum.github.io/favicon-32x32.png>
<link rel=apple-touch-icon href=https://pugillum.github.io/apple-touch-icon.png>
<link rel=mask-icon href=https://pugillum.github.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.89.4">
<meta property="og:title" content="Move Azure DevOps project wiki to a standard repo">
<meta property="og:description" content="How to shift an Azure DevOps project wiki to a standard repo">
<meta property="og:type" content="article">
<meta property="og:url" content="https://pugillum.github.io/posts/2021_08_03_how_to_move_azure_devops_wiki/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-08-03T00:00:00+00:00">
<meta property="article:modified_time" content="2021-08-03T00:00:00+00:00"><meta property="og:site_name" content="Travis Dent">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Move Azure DevOps project wiki to a standard repo">
<meta name=twitter:description content="How to shift an Azure DevOps project wiki to a standard repo">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://pugillum.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Move Azure DevOps project wiki to a standard repo","item":"https://pugillum.github.io/posts/2021_08_03_how_to_move_azure_devops_wiki/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Move Azure DevOps project wiki to a standard repo","name":"Move Azure DevOps project wiki to a standard repo","description":"How to shift an Azure DevOps project wiki to a standard repo","keywords":["how-to"],"articleBody":"Azure DevOps has a nice feature allowing teams to create a wiki within an Azure DevOps project. Functionality to publish code as a wiki was added later. The project wiki is likely backed with a git repo but that repo isnâ€™t accessible. This post is about how to shift the project wiki to a code-backed wiki, allowing one to maintain the wiki as code allowing branches, pull requests and other git goodness.\nThere are essentially 3 steps:\n Create a repo from the existing wiki code Create a wiki from this code Remove the project wiki  Create a repo from the existing wiki code   Select the button next to the wiki title and select Clone wiki\n  In the pop-up select Generate Git credentials which will make a User Name and Password available. Keep these details open for future steps.\n  In a new tab, open the same Azure DevOps project\n  Select Repos- Files\n  Select the drop-down next to the Repo name and select Import repository   Return to the previous tab and in the Clone repository popup, copy the HTTPS URL. This should be used as the Clone URL value.\n  Once youâ€™ve pasted this into the Import a Git repository dialog, youâ€™ll also need to copy across the user name and password.\n  The name can be changed but itâ€™s recommended to shift to snake_case (e.g. myproject_wiki)\n  The result should look like below   Select Import and wait until the repo has been created.\n  Create a wiki from this code   Return to the first tab and close the pop-up.\n  Select the drop-down next to the wiki name and select Publish code as wiki   Ensure the new wiki repo is selected as well as the main branch (likely wikiMaster)\n  In folder fill in / and fill in a name   Select Publish\n  Congrats! You have a new wiki! ðŸŽ‰   But! Thereâ€™s now a duplicate wiki and the default will always be the project wiki. ðŸ˜ž This is the reason for the next section.\n  Remove the project wiki Unfortunately there is no way to remove the project wiki via the user interface. The removal needs to be done as an API call. And the API call needs to be done with authorization.\nGet a Personal Access Token (PAT)   Select the User Settings icon and then Personal access tokens   Select to add a new token\n  Give the token Full access but limit the Expiration to a single day (you can also remove the PAT after the project wiki has been removed)   Keep the token in an accessible (and safe) place\n  Delete the Project Wiki with Postman Note: If you prefer using curl check the next section.\n  Install Postman\n  Add a Collection and a Request\n  Set the URL to\nhttps://dev.azure.com/{Organization}/{Project}/_apis/wiki/wikis?api-version=6.0   Select the Authorization tab, select Type Basic Auth and set the Password to the PAT   Send the request. The response should contain a list of two Wikis. Determine which one is the Project wiki and note down the ID of the wiki.   Create a new request\n  Change the method from GET to DELETE and set the URL to the following where repositoryId should be the ID of the wiki noted above.\nhttps://dev.azure.com/{Organization}/{Project}/_apis/git/repositories/{repositoryId}?api-version=6.0   Select Authorization and ensure the Type and Password are the same as for the previous request.\n  Select Send.\n  Rerun the GET request and ensure that there is now only one wiki.\n  (Advanced) Delete the Project Wiki with curl This assumes you have jq installed for formatting the JSON\n List the wikis of the project using the following curl command  curl -u :{Personal Access Token} --location --request GET 'https://dev.azure.com/{Organization}/{Project}/_apis/wiki/wikis?api-version=6.0' | jq  Note down the ID of the wiki   Delete the wiki repository using the following curl command\n  curl -u :{Personal Access Token} --location --request DELETE 'https://dev.azure.com/{Organization}/{Project}/_apis/git/repositories/{Wiki ID}?api-version=6.0' Rerun the GET request and ensure that there is only one wiki.  ","wordCount":"630","inLanguage":"en","datePublished":"2021-08-03T00:00:00Z","dateModified":"2021-08-03T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://pugillum.github.io/posts/2021_08_03_how_to_move_azure_devops_wiki/"},"publisher":{"@type":"Organization","name":"Travis Dent","logo":{"@type":"ImageObject","url":"https://pugillum.github.io/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<noscript>
<style type=text/css>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://pugillum.github.io/ accesskey=h title="  (Alt + H)">
<img src=/avatar.png alt=logo aria-label=logo height=35> </a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu onscroll=menu_on_scroll()>
<li>
<a href=https://pugillum.github.io/archives/ title=archive>
<span>archive</span>
</a>
</li>
<li>
<a href=https://pugillum.github.io/tags/ title=tags>
<span>tags</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<h1 class=post-title>
Move Azure DevOps project wiki to a standard repo
</h1>
<div class=post-meta>August 3, 2021&nbsp;Â·&nbsp;3 min
</div>
</header>
<div class=post-content><p>Azure DevOps has a nice feature allowing teams to create a wiki within an Azure DevOps project. Functionality to publish code as a wiki was added later. The project wiki is likely backed with a git repo but that repo isn&rsquo;t accessible. This post is about how to shift the project wiki to a code-backed wiki, allowing one to maintain the wiki as code allowing branches, pull requests and other git goodness.</p>
<p>There are essentially 3 steps:</p>
<ol>
<li>Create a repo from the existing wiki code</li>
<li>Create a wiki from this code</li>
<li>Remove the project wiki</li>
</ol>
<h2 id=create-a-repo-from-the-existing-wiki-code>Create a repo from the existing wiki code<a hidden class=anchor aria-hidden=true href=#create-a-repo-from-the-existing-wiki-code>#</a></h2>
<ol>
<li>
<p>Select the button next to the wiki title and select <code>Clone wiki</code></p>
<p><img loading=lazy src=images/2021_08_03_How_to_move_AD_wiki/image-20210803200321393.png alt=image-20210803200321393>
</p>
</li>
<li>
<p>In the pop-up select <code>Generate Git credentials</code> which will make a User Name and Password available. Keep these details open for future steps.</p>
</li>
<li>
<p>In a new tab, open the same Azure DevOps project</p>
</li>
<li>
<p>Select <code>Repos</code>-> <code>Files</code></p>
</li>
<li>
<p>Select the drop-down next to the Repo name and select <code>Import repository</code>
<img loading=lazy src=images/2021_08_03_How_to_move_AD_wiki/image-20210803200914383.png alt=image-20210803200914383>
</p>
</li>
<li>
<p>Return to the previous tab and in the <code>Clone repository</code> popup, copy the HTTPS URL. This should be used as the <code>Clone URL</code> value.</p>
</li>
<li>
<p>Once you&rsquo;ve pasted this into the <code>Import a Git repository</code> dialog, you&rsquo;ll also need to copy across the user name and password.</p>
</li>
<li>
<p>The name can be changed but it&rsquo;s recommended to shift to snake_case (e.g. myproject_wiki)</p>
</li>
<li>
<p>The result should look like below
<img loading=lazy src=images/2021_08_03_How_to_move_AD_wiki/image-20210803201525197.png alt=image-20210803201525197>
</p>
</li>
<li>
<p>Select <code>Import</code> and wait until the repo has been created.</p>
</li>
</ol>
<h2 id=create-a-wiki-from-this-code>Create a wiki from this code<a hidden class=anchor aria-hidden=true href=#create-a-wiki-from-this-code>#</a></h2>
<ol>
<li>
<p>Return to the first tab and close the pop-up.</p>
</li>
<li>
<p>Select the drop-down next to the wiki name and select <code>Publish code as wiki</code>
<img loading=lazy src=images/2021_08_03_How_to_move_AD_wiki/image-20210803202111621.png alt=image-20210803202111621>
</p>
</li>
<li>
<p>Ensure the new wiki repo is selected as well as the main branch (likely <code>wikiMaster</code>)</p>
</li>
<li>
<p>In folder fill in <code>/</code> and fill in a name
<img loading=lazy src=images/2021_08_03_How_to_move_AD_wiki/image-20210803202306642.png alt=image-20210803202306642>
</p>
</li>
<li>
<p>Select <code>Publish</code></p>
</li>
<li>
<p>Congrats! You have a new wiki! ðŸŽ‰
<img loading=lazy src=images/2021_08_03_How_to_move_AD_wiki/image-20210803202434196.png alt=image-20210803202434196>
</p>
</li>
<li>
<p>But! There&rsquo;s now a duplicate wiki and the default will always be the project wiki. ðŸ˜ž This is the reason for the next section.</p>
</li>
</ol>
<h2 id=remove-the-project-wiki>Remove the project wiki<a hidden class=anchor aria-hidden=true href=#remove-the-project-wiki>#</a></h2>
<p>Unfortunately there is no way to remove the project wiki via the user interface. The removal needs to be done as an API call. And the API call needs to be done with authorization.</p>
<h3 id=get-a-personal-access-token-pat>Get a Personal Access Token (PAT)<a hidden class=anchor aria-hidden=true href=#get-a-personal-access-token-pat>#</a></h3>
<ol>
<li>
<p>Select the <code>User Settings</code> icon and then <code>Personal access tokens</code>
<img loading=lazy src=images/2021_08_03_How_to_move_AD_wiki/image-20210803204808152.png alt=image-20210803204808152>
</p>
</li>
<li>
<p>Select to add a new token</p>
</li>
<li>
<p>Give the token <code>Full access</code> but limit the Expiration to a single day (you can also remove the PAT after the project wiki has been removed)
<img loading=lazy src=images/2021_08_03_How_to_move_AD_wiki/image-20210803205251489.png alt=image-20210803205251489>
</p>
</li>
<li>
<p>Keep the token in an accessible (and safe) place</p>
</li>
</ol>
<h3 id=delete-the-project-wiki-with-postman>Delete the Project Wiki with Postman<a hidden class=anchor aria-hidden=true href=#delete-the-project-wiki-with-postman>#</a></h3>
<p>Note: If you prefer using <code>curl</code> check the next section.</p>
<ol>
<li>
<p>Install Postman</p>
</li>
<li>
<p>Add a Collection and a Request</p>
</li>
<li>
<p>Set the URL to</p>
<pre tabindex=0><code>https://dev.azure.com/{Organization}/{Project}/_apis/wiki/wikis?api-version=6.0
</code></pre></li>
<li>
<p>Select the <code>Authorization</code> tab, select Type <code>Basic Auth</code> and set the Password to the PAT
<img loading=lazy src=images/2021_08_03_How_to_move_AD_wiki/image-20210803211150456.png alt=image-20210803211150456>
</p>
</li>
<li>
<p>Send the request. The response should contain a list of two Wikis. Determine which one is the Project wiki and note down the ID of the wiki.
<img loading=lazy src=images/2021_08_03_How_to_move_AD_wiki/image-20210803211347715.png alt=image-20210803211347715>
</p>
</li>
<li>
<p>Create a new request</p>
</li>
<li>
<p>Change the method from GET to DELETE and set the URL to the following where <code>repositoryId</code> should be the ID of the wiki noted above.</p>
<pre tabindex=0><code>https://dev.azure.com/{Organization}/{Project}/_apis/git/repositories/{repositoryId}?api-version=6.0
</code></pre></li>
<li>
<p>Select Authorization and ensure the Type and Password are the same as for the previous request.</p>
</li>
<li>
<p>Select Send.</p>
</li>
<li>
<p>Rerun the GET request and ensure that there is now only one wiki.</p>
</li>
</ol>
<h3 id=advanced-delete-the-project-wiki-with-curl>(Advanced) Delete the Project Wiki with curl<a hidden class=anchor aria-hidden=true href=#advanced-delete-the-project-wiki-with-curl>#</a></h3>
<p>This assumes you have <code>jq</code> installed for formatting the JSON</p>
<ol>
<li>List the wikis of the project using the following curl command</li>
</ol>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>curl -u :<span style=color:#f92672>{</span>Personal Access Token<span style=color:#f92672>}</span> --location --request GET <span style=color:#e6db74>&#39;https://dev.azure.com/{Organization}/{Project}/_apis/wiki/wikis?api-version=6.0&#39;</span> | jq
</code></pre></div><ol start=2>
<li>
<p>Note down the ID of the wiki
<img loading=lazy src=images/2021_08_03_How_to_move_AD_wiki/image-20210803212831262.png alt=image-20210803212831262>
</p>
</li>
<li>
<p>Delete the wiki repository using the following curl command</p>
</li>
</ol>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>curl -u :<span style=color:#f92672>{</span>Personal Access Token<span style=color:#f92672>}</span> --location --request DELETE <span style=color:#e6db74>&#39;https://dev.azure.com/{Organization}/{Project}/_apis/git/repositories/{Wiki ID}?api-version=6.0&#39;</span>
</code></pre></div><ol start=4>
<li>Rerun the GET request and ensure that there is only one wiki.</li>
</ol>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://pugillum.github.io/tags/how-to/>how-to</a></li>
</ul>
<nav class=paginav>
<a class=prev href=https://pugillum.github.io/posts/2021_11_28_drawio_in_markdown/>
<span class=title>Â« Prev Page</span>
<br>
<span>All you need for your documentation is VS Code, Markdown and draw.io</span>
</a>
<a class=next href=https://pugillum.github.io/posts/2021-04-10_about_me/>
<span class=title>Next Page Â»</span>
<br>
<span>About me</span>
</a>
</nav>
</footer><script src=https://utteranc.es/client.js repo=mscipio/mscipio.github.io issue-term=pathname label=Comment theme=github-light crossorigin=anonymous async></script>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://pugillum.github.io/>Travis Dent</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)">
<button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</button>
</a>
<script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position"))};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft)}document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>